class t {constructor() {this.t = Math.PI / 180, this.o = 180 / Math.PI}i(t) {return [t[0] + 180, -t[1]]}h(t) {const o = this.u(t),e = $moshier.body.sun;$processor.calc(o, e);const s = this.m(o.julian),r = e.position.altaz.topocentric.dRA,n = e.position.altaz.topocentric.dec,i = e.position.altaz.topocentric.dDec;let c = [r.hours, r.minutes, r.seconds],a = this.O(c) - s,u = i.degree + i.minutes / 60;return [a, n ? -u : u]}q(t) {const o = this.v(t),e = this.m(o),s = this.u(t),r = $moshier.body.moon;$processor.calc(s, r);const n = r.position.altaz.topocentric.dRA,i = r.position.altaz.topocentric.dec,c = r.position.altaz.topocentric.dDec;let a = [n.hours, n.minutes, n.seconds],u = this.O(a) - e,h = c.degree + c.minutes / 60;return [u, i < 0 ? -h : h]}B(t) {const o = this.u(t),e = $moshier.body.moon;$processor.calc(o, e);const s = $moshier.body.sun;$processor.calc(o, s);const r = e.position.apparentLongitude,n = s.position.apparentLongitude,i = e.position.illuminatedFraction;let z = Math.max(r, n);let q = Math.min(r, n);let f = 180 - (z - 180) - (r > n ? -q : q);let x = Math.abs(r - n);return i <= .02 ? -1 : i >= .9 ? 3 : f > x ? i < .45 ? 0 : i < .55 ? 1 : 2 : i > .55 ? 4 : i > .45 ? 5 : 6}v(t) {let o = t.getMonth() + 1,e = t.getDate(),s = t.getFullYear(),r = t.getHours(),n = t.getMinutes();n /= 60;let i = r + n;return 367 * s - Math.floor(7 * (s + Math.floor((o + 9) / 12)) / 4) + Math.floor(275 * o / 9) + e + 1721013.5 + i / 24}H(t) {let o = 18.697374558 + 24.06570982441908 * (t - 2451545);o %= 24;let e = 60 * (o - Math.floor(o)),s = 60 * (e - Math.floor(e)),r = Math.floor(o);return e = Math.floor(e), s = Math.floor(s), [r, e, s]}m(t) {return this.O(this.H(t))}O(t) {return 15 * t[0] + t[1] / 60 * 15 + t[2] / 3600 * 15}u(t) {return {year: t.getFullYear(),month: t.getMonth() + 1,day: t.getDate(),hours: t.getHours(),minutes: t.getMinutes(),seconds: t.getSeconds()}}}